(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[138],{56795:function(e,t,r){Promise.resolve().then(r.bind(r,85100))},92513:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(78030).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},10883:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(78030).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},74697:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(78030).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},16463:function(e,t,r){"use strict";var a=r(71169);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},85100:function(e,t,r){"use strict";r.d(t,{default:function(){return h}});var a=r(57437),s=r(2265),n=r(16463),o=r(92513),i=r(78030);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,i.Z)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var d=r(10883);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,i.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var u=r(74697),g=r(87138);let m=["Comida","Transporte","Servicios","Entretenimiento"],x=["Sueldo","Ventas","Inversiones","Otros"],f=["Efectivo","Tarjeta de cr\xe9dito","Transferencia"],p=["Yo","Pareja","Familiar"];function h(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)().get("type")||"expense",r=()=>{let e=new Date;return new Date(e.getTime()-(e.getTimezoneOffset()+180)*6e4).toISOString().split("T")[0]},[i,h]=(0,s.useState)({description:"",amount:0,date:r(),category:"",type:t,paymentMethod:"",owner:""}),[b,y]=(0,s.useState)(m),[k,v]=(0,s.useState)(x),[S,N]=(0,s.useState)(f),[j,w]=(0,s.useState)(p),[C,I]=(0,s.useState)({livingAlone:!0}),[O,P]=(0,s.useState)(""),[J,Z]=(0,s.useState)(""),[M,E]=(0,s.useState)(""),[z,F]=(0,s.useState)(!1),[T,D]=(0,s.useState)(!1),[_,L]=(0,s.useState)(!1),[q,G]=(0,s.useState)(null),[R,V]=(0,s.useState)(null),[A,H]=(0,s.useState)(null),[X,Y]=(0,s.useState)(""),[$,B]=(0,s.useState)(r()),[K,Q]=(0,s.useState)(""),[U,W]=(0,s.useState)(""),[ee,et]=(0,s.useState)(""),[er,ea]=(0,s.useState)(""),[es,en]=(0,s.useState)(null),[eo,ei]=(0,s.useState)(!1),[el,ed]=(0,s.useState)([]),[ec,eu]=(0,s.useState)(null),[eg,em]=(0,s.useState)(""),[ex,ef]=(0,s.useState)([]),ep="expense"===t?b:k,eh=e=>{"expense"===t?(y(e),localStorage.setItem("expenseCategories",JSON.stringify(e))):(v(e),localStorage.setItem("incomeCategories",JSON.stringify(e)))};(0,s.useEffect)(()=>{(()=>{try{let e=localStorage.getItem("settings");e&&I(JSON.parse(e));let t=localStorage.getItem("expenseCategories");t&&y(JSON.parse(t));let r=localStorage.getItem("incomeCategories");r&&v(JSON.parse(r));let a=localStorage.getItem("paymentMethods");a&&N(JSON.parse(a));let s=localStorage.getItem("people");s&&w(JSON.parse(s));let n=localStorage.getItem("comprobantes");if(n){let e=JSON.parse(n);ed(e),ef(e)}}catch(e){console.error("Error al cargar datos:",e)}})()},[]),(0,s.useEffect)(()=>{""===eg.trim()?ef(el):ef(el.filter(e=>e.description.toLowerCase().includes(eg.toLowerCase())||e.fileName.toLowerCase().includes(eg.toLowerCase())))},[eg,el]);let eb=e=>{G(e),P(e)},ey=e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar esta categor\xeda?")){let t=ep.filter(t=>t!==e);eh(t),localStorage.setItem("categories",JSON.stringify(t))}};return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"expense"===t?"Nuevo Gasto":"Nuevo Ingreso"}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)(g.default,{href:"/transacciones/nueva?type=expense",className:"px-4 py-2 rounded-md ".concat("expense"===t?"bg-red-500 text-white":"bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300"),children:"Gasto"}),(0,a.jsx)(g.default,{href:"/transacciones/nueva?type=income",className:"px-4 py-2 rounded-md ".concat("income"===t?"bg-green-500 text-white":"bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300"),children:"Ingreso"})]})]}),(0,a.jsxs)("form",{onSubmit:r=>{if(r.preventDefault(),!X||!U||!ee){alert("Por favor complete los campos obligatorios");return}let a={id:Date.now().toString(),amount:parseFloat(X),date:$,description:K,category:U,type:t,paymentMethod:ee,person:er||void 0,attachmentId:ec||void 0},s=localStorage.getItem("transactions"),n=s?JSON.parse(s):[];n.push(a),localStorage.setItem("transactions",JSON.stringify(n)),e.push("/transacciones")},className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium mb-1",children:"Monto*"}),(0,a.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),(0,a.jsx)("input",{type:"number",id:"amount",name:"amount",value:X,onChange:e=>Y(e.target.value),required:!0,className:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-7 pr-12 sm:text-sm border-gray-300 rounded-md dark:bg-gray-800 dark:border-gray-600 dark:text-white",placeholder:"0.00",step:"0.01"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium mb-1",children:"Fecha*"}),(0,a.jsx)("input",{type:"date",id:"date",name:"date",value:$,onChange:e=>B(e.target.value),required:!0,className:"focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md dark:bg-gray-800 dark:border-gray-600 dark:text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium mb-1",children:"Descripci\xf3n"}),(0,a.jsx)("input",{type:"text",id:"description",name:"description",value:K,onChange:e=>Q(e.target.value),className:"focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md dark:bg-gray-800 dark:border-gray-600 dark:text-white",placeholder:"Descripci\xf3n de la transacci\xf3n"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium",children:"Categor\xeda*"}),(0,a.jsxs)("button",{type:"button",onClick:()=>F(!0),className:"text-indigo-600 hover:text-indigo-500 text-sm flex items-center",children:[(0,a.jsx)(o.Z,{size:16,className:"mr-1"})," Agregar"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mb-2",children:ep.map(e=>(0,a.jsxs)("div",{className:"relative p-2 border rounded-md cursor-pointer flex items-center justify-between ".concat(U===e?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900 dark:border-indigo-400":"border-gray-300 hover:border-indigo-300 dark:border-gray-600 dark:hover:border-indigo-600"),onClick:()=>W(e),children:[(0,a.jsx)("span",{className:"block truncate",children:e}),(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),eb(e)},className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,a.jsx)(l,{size:14})}),(0,a.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),ey(e)},className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400",children:(0,a.jsx)(d.Z,{size:14})})]})]},e))}),z&&(0,a.jsxs)("div",{className:"mt-2 flex",children:[(0,a.jsx)("input",{type:"text",value:O,onChange:e=>P(e.target.value),className:"focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-l-md dark:bg-gray-800 dark:border-gray-600 dark:text-white",placeholder:"Nueva categor\xeda"}),(0,a.jsx)("button",{type:"button",onClick:q?()=>{if(q&&O.trim()){let e=ep.map(e=>e===q?O.trim():e);eh(e),localStorage.setItem("categories",JSON.stringify(e)),G(null),P("")}}:()=>{if(O.trim()&&!ep.includes(O.trim())){let e=[...ep,O.trim()];eh(e),localStorage.setItem("categories",JSON.stringify(e)),P("")}},className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-none rounded-r-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:q?(0,a.jsx)(c,{size:16}):(0,a.jsx)(o.Z,{size:16})}),(0,a.jsx)("button",{type:"button",onClick:()=>{F(!1),G(null),P("")},className:"ml-2 inline-flex items-center px-3 py-2 border border-gray-300 text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-700",children:(0,a.jsx)(u.Z,{size:16})})]})]}),(0,a.jsxs)("div",{className:"pt-4 flex justify-between",children:[(0,a.jsx)(g.default,{href:"/transacciones",className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-700",children:"Cancelar"}),(0,a.jsxs)("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white ".concat("expense"===t?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-green-600 hover:bg-green-700 focus:ring-green-500"," focus:outline-none focus:ring-2 focus:ring-offset-2"),children:["Guardar ","expense"===t?"Gasto":"Ingreso"]})]})]})]})}}},function(e){e.O(0,[48,971,23,744],function(){return e(e.s=56795)}),_N_E=e.O()}]);