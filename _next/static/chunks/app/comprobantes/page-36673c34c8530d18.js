(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[634],{76340:function(e,t,a){Promise.resolve().then(a.bind(a,35490))},69003:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(78030).Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]])},59061:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(78030).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},54817:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(78030).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},90399:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(78030).Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},74697:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(78030).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},35490:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var s=a(57437),r=a(2265),l=a(54817),i=a(78030);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,i.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),d=(0,i.Z)("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),o=(0,i.Z)("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var c=a(59061),x=a(74697);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,i.Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var u=a(90399),p=a(69003);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,i.Z)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),g=(0,i.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var f=a(87138);function y(){var e;let[t]=(0,r.useState)({id:"user123"}),[a,i]=(0,r.useState)([]),[y,b]=(0,r.useState)([]),[v,j]=(0,r.useState)([]),[N,k]=(0,r.useState)(""),[w,S]=(0,r.useState)(null),[C,Z]=(0,r.useState)(""),[z,M]=(0,r.useState)(!1),[_,D]=(0,r.useState)(""),[I,O]=(0,r.useState)(!1),[q,E]=(0,r.useState)(""),[J,L]=(0,r.useState)(""),[H,P]=(0,r.useState)(""),F=(0,r.useCallback)(()=>{let e=y;_&&(e=e.filter(e=>e.folder_id===_)),N&&(e=e.filter(e=>e.description.toLowerCase().includes(N.toLowerCase())||e.file_name.toLowerCase().includes(N.toLowerCase()))),j(e)},[N,y,_]);(0,r.useEffect)(()=>{F()},[F]),(0,r.useEffect)(()=>{let e=localStorage.getItem("folders");if(e)i(JSON.parse(e));else{let e={id:"default",name:"General",createdAt:new Date().toISOString()};i([e]),localStorage.setItem("folders",JSON.stringify([e]))}let t=localStorage.getItem("comprobantes");if(t){let e=JSON.parse(t);b(e),j(e)}},[F]);let V=e=>{let t=y.filter(t=>t.id!==e);b(t),localStorage.setItem("comprobantes",JSON.stringify(t))},A=()=>{if(!q.trim())return;let e={id:Date.now().toString(),name:q.trim(),createdAt:new Date().toISOString()},t=[...a,e];i(t),localStorage.setItem("folders",JSON.stringify(t)),E(""),O(!1),D(e.id)},G=e=>{L(e.id),P(e.name)},B=()=>{if(!H.trim())return;let e=a.map(e=>e.id===J?{...e,name:H.trim()}:e);i(e),localStorage.setItem("folders",JSON.stringify(e)),L(""),P("")},T=e=>{var t,s;if(a.length<=1){alert("No puedes eliminar la \xfanica carpeta");return}let r=y.filter(t=>t.folder_id===e);if(r.length>0){if(!window.confirm("Esta carpeta contiene ".concat(r.length," comprobante(s). \xbfDeseas eliminar la carpeta y mover los comprobantes a la carpeta general?")))return;{let s=(null===(t=a.find(t=>t.id!==e))||void 0===t?void 0:t.id)||"",r=y.map(t=>t.folder_id===e?{...t,folder_id:s}:t);b(r),localStorage.setItem("comprobantes",JSON.stringify(r))}}let l=a.filter(t=>t.id!==e);i(l),localStorage.setItem("folders",JSON.stringify(l)),_===e&&D((null===(s=l[0])||void 0===s?void 0:s.id)||"")};return(0,s.jsxs)("div",{className:"space-y-6 p-6 dark-theme",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Comprobantes"}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"relative flex-grow max-w-md",children:[(0,s.jsx)(l.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar comprobantes...",className:"w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:N,onChange:e=>{k(e.target.value)}})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 flex items-center gap-2",onClick:()=>{var e;return null===(e=document.getElementById("file-input"))||void 0===e?void 0:e.click()},children:[(0,s.jsx)(n,{size:16}),(0,s.jsx)("span",{children:"Subir"})]}),(0,s.jsxs)("button",{className:"px-4 py-2 bg-gray-800 border border-gray-700 text-gray-400 rounded-md hover:bg-gray-700 flex items-center gap-2",onClick:()=>O(!0),children:[(0,s.jsx)(d,{size:16}),(0,s.jsx)("span",{children:"Nueva carpeta"})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,s.jsxs)("div",{className:"md:w-64 bg-gray-800 rounded-lg p-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Carpetas"}),(0,s.jsxs)("ul",{className:"space-y-1",children:[(0,s.jsx)("li",{className:"px-3 py-2 rounded-md cursor-pointer flex items-center justify-between ".concat(""===_?"bg-indigo-600 text-white":"hover:bg-gray-700 text-gray-300"),onClick:()=>D(""),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o,{size:16}),(0,s.jsx)("span",{children:"Todas"})]})}),a.map(e=>(0,s.jsx)("li",{className:"px-3 py-2 rounded-md cursor-pointer ".concat(_===e.id?"bg-indigo-600 text-white":"hover:bg-gray-700 text-gray-300"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-grow",onClick:()=>D(e.id),children:[(0,s.jsx)(o,{size:16}),J===e.id?(0,s.jsx)("input",{type:"text",className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white w-full",value:H,onChange:e=>P(e.target.value),onKeyDown:e=>"Enter"===e.key&&B(),autoFocus:!0}):(0,s.jsx)("span",{children:e.name})]}),J===e.id?(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("button",{onClick:B,className:"text-green-400 hover:text-green-300",children:(0,s.jsx)(c.Z,{size:14})}),(0,s.jsx)("button",{onClick:()=>{L(""),P("")},className:"text-red-400 hover:text-red-300",children:(0,s.jsx)(x.Z,{size:14})})]}):(0,s.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100",children:[(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),G(e)},className:"text-gray-400 hover:text-blue-400",children:(0,s.jsx)(m,{size:14})}),(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),T(e.id)},className:"text-gray-400 hover:text-red-400",children:(0,s.jsx)(u.Z,{size:14})})]})]})},e.id))]}),I&&(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)("input",{type:"text",placeholder:"Nombre de carpeta",className:"bg-gray-700 border border-gray-600 rounded px-3 py-1.5 text-white w-full",value:q,onChange:e=>E(e.target.value),onKeyDown:e=>"Enter"===e.key&&A(),autoFocus:!0}),(0,s.jsx)("button",{onClick:A,className:"text-green-400 hover:text-green-300 p-1.5",children:(0,s.jsx)(c.Z,{size:18})}),(0,s.jsx)("button",{onClick:()=>{O(!1),E("")},className:"text-red-400 hover:text-red-300 p-1.5",children:(0,s.jsx)(x.Z,{size:18})})]})})]}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),C&&w&&(M(!0),setTimeout(()=>{var e;let s=[...y,{id:Date.now().toString(),user_id:(null==t?void 0:t.id)||"",description:C,file_name:(null==w?void 0:w.name)||"Sin archivo",file_type:(null==w?void 0:w.type)||"",file_url:URL.createObjectURL(w),folder_id:_||(null===(e=a[0])||void 0===e?void 0:e.id)||"default",created_at:new Date().toISOString()}];b(s),localStorage.setItem("comprobantes",JSON.stringify(s)),S(null),Z(""),M(!1);let r=document.getElementById("file-input");r&&(r.value="")},1e3))},className:"bg-gray-800 rounded-lg p-5 mb-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Subir comprobante"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Descripci\xf3n"}),(0,s.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Descripci\xf3n del comprobante",value:C,onChange:e=>Z(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Carpeta"}),(0,s.jsx)("select",{className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:_,onChange:e=>D(e.target.value),children:a.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,s.jsxs)("div",{className:"md:col-span-3",children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Archivo"}),(0,s.jsxs)("div",{className:"relative border-2 border-dashed border-gray-600 rounded-md p-4 text-center hover:border-gray-500 transition-colors",children:[(0,s.jsx)("input",{id:"file-input",type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:e=>{e.target.files&&e.target.files.length>0&&S(e.target.files[0])},required:!0}),(0,s.jsxs)("div",{className:"space-y-2 flex flex-col items-center justify-center",children:[(0,s.jsx)(n,{className:"text-gray-400 mx-auto",size:30}),w?(0,s.jsx)("p",{className:"text-indigo-400",children:w.name}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-gray-300",children:"Arrastra un archivo o haz clic para seleccionar"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"PDF, PNG, JPG, JPEG (m\xe1x. 10MB)"})]})]})]})]})]}),(0,s.jsx)("div",{className:"flex justify-end mt-4",children:(0,s.jsx)("button",{type:"submit",disabled:z||!w||!C,className:"px-4 py-2 rounded-md flex items-center gap-2 ".concat(!z&&w&&C?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:z?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),(0,s.jsx)("span",{children:"Subiendo..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n,{size:16}),(0,s.jsx)("span",{children:"Subir comprobante"})]})})})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-5",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold mb-4",children:[_?"Comprobantes en ".concat(null===(e=a.find(e=>e.id===_))||void 0===e?void 0:e.name):"Todos los comprobantes",(0,s.jsxs)("span",{className:"text-sm font-normal text-gray-400 ml-2",children:["(",v.length,")"]})]}),0===v.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-400",children:N?(0,s.jsx)("p",{children:"No se encontraron comprobantes que coincidan con la b\xfasqueda."}):_?(0,s.jsx)("p",{children:"No hay comprobantes en esta carpeta."}):(0,s.jsx)("p",{children:"No hay comprobantes guardados."})}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(e=>{var t;return(0,s.jsx)("div",{className:"bg-gray-700 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"bg-gray-800 p-2 rounded-lg",children:(0,s.jsx)(p.Z,{size:24,className:"text-indigo-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-white",children:e.description}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:new Date(e.created_at||"").toLocaleDateString()}),(0,s.jsx)("p",{className:"text-sm text-gray-300 mt-2 truncate",title:e.file_name,children:e.file_name}),(0,s.jsxs)("div",{className:"flex items-center mt-2 text-xs text-gray-400",children:[(0,s.jsx)(o,{size:12,className:"mr-1"}),(0,s.jsx)("span",{children:(null===(t=a.find(t=>t.id===e.folder_id))||void 0===t?void 0:t.name)||"General"})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,s.jsx)(f.default,{href:"/transacciones?receiptId=".concat(e.id),children:(0,s.jsx)("button",{className:"p-1.5 bg-purple-600/20 text-purple-400 rounded-lg hover:bg-purple-600/30 transition-colors",title:"Vincular a transacci\xf3n",children:(0,s.jsx)(h,{size:16})})}),(0,s.jsx)("button",{className:"p-1.5 bg-blue-600/20 text-blue-400 rounded-lg hover:bg-blue-600/30 transition-colors",title:"Descargar comprobante",children:(0,s.jsx)(g,{size:16})}),(0,s.jsx)("button",{onClick:()=>V(e.id),className:"p-1.5 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors",title:"Eliminar comprobante",children:(0,s.jsx)(u.Z,{size:16})})]})]})},e.id)})})]})]})]})]})}}},function(e){e.O(0,[48,971,23,744],function(){return e(e.s=76340)}),_N_E=e.O()}]);