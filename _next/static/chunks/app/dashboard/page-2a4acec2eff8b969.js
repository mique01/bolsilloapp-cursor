(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{31947:function(e,t,a){Promise.resolve().then(a.bind(a,11789))},11789:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return D}});var s=a(57437),r=a(2265),n=a(35231),i=a(92566),l=a(54142),o=a(2842),c=a(9542),d=a(85475),x=a(20153),m=a(16638),h=a(23909),u=a(85369),g=a(68295),f=a(25974),p=a(45745),y=a(95737),j=a(53225),b=a(55066),v=a(63541),N=a(24241),k=a(56935);let w=["#00E5BE","#22c55e","#3b82f6","#8b5cf6","#ec4899","#f43f5e","#f97316","#facc15"];function D(){let[e,t]=(0,r.useState)([]),[a,D]=(0,r.useState)([]),[S,E]=(0,r.useState)("30d"),[L,A]=(0,r.useState)(!1),[M,z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{A(!0);let e=setTimeout(()=>{z(!0)},300);return()=>clearTimeout(e)},[]),(0,r.useEffect)(()=>{let e=localStorage.getItem("transactions");e&&t(JSON.parse(e));let a=localStorage.getItem("budgets");a&&D(JSON.parse(a))},[]);let C=(0,r.useMemo)(()=>{if(!e.length)return[];let t=new Date,a=new Date;switch(S){case"7d":a.setDate(t.getDate()-7);break;case"30d":a.setDate(t.getDate()-30);break;case"year":a.setFullYear(t.getFullYear()-1);break;case"all":return e}return e.filter(e=>new Date(e.date)>=a)},[e,S]),F=(0,r.useMemo)(()=>C.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),[C]),K=(0,r.useMemo)(()=>C.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0),[C]),$=F-K,B=(0,r.useMemo)(()=>{let e={};return C.filter(e=>"expense"===e.type).forEach(t=>{t.category&&(e[t.category]=(e[t.category]||0)+t.amount)}),Object.entries(e).map(e=>{let[t,a]=e;return{name:t,value:a}}).sort((e,t)=>t.value-e.value)},[C]),O=(0,r.useMemo)(()=>{let e={};return C.filter(e=>"expense"===e.type).forEach(t=>{let a=t.paymentMethod||"Desconocido";e[a]=(e[a]||0)+t.amount}),Object.entries(e).map(e=>{let[t,a]=e;return{name:t,value:a}}).sort((e,t)=>t.value-e.value)},[C]);(0,r.useMemo)(()=>{let e={},t=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],a=new Date;for(let s=5;s>=0;s--){let r=t[new Date(a.getFullYear(),a.getMonth()-s,1).getMonth()];e["".concat(r)]={income:0,expense:0}}return C.forEach(a=>{let s=t[new Date(a.date).getMonth()];e[s]&&("income"===a.type?e[s].income+=a.amount:e[s].expense+=a.amount)}),Object.entries(e).map(e=>{let[t,a]=e;return{name:t,income:a.income,expense:a.expense}})},[C]);let W=(0,r.useMemo)(()=>{let e=new Date,t={},a=["Dom","Lun","Mar","Mie","Jue","Vie","Sab"];for(let s=6;s>=0;s--){let r=new Date(e);r.setDate(e.getDate()-s);let n=a[r.getDay()];t["".concat(n," ").concat(r.getDate())]={income:0,expense:0}}let s=new Date(e);return s.setDate(e.getDate()-7),C.filter(e=>new Date(e.date)>=s).forEach(e=>{let s=new Date(e.date),r=a[s.getDay()],n="".concat(r," ").concat(s.getDate());t[n]&&("income"===e.type?t[n].income+=e.amount:t[n].expense+=e.amount)}),Object.entries(t).map(e=>{let[t,a]=e;return{name:t,income:a.income,expense:a.expense}})},[C]),Z=(0,r.useMemo)(()=>{if(!a.length)return[];let e={};return C.filter(e=>"expense"===e.type).forEach(t=>{t.category&&(e[t.category]=(e[t.category]||0)+t.amount)}),a.map(t=>({category:t.category,budget:t.amount,actual:e[t.category]||0})).sort((e,t)=>t.budget-e.budget)},[a,C]),_=e=>{let{active:t,payload:a,label:r}=e;return t&&a&&a.length?(0,s.jsxs)("div",{className:"bg-gray-800 border border-gray-700 p-3 rounded-lg shadow-xl",children:[(0,s.jsx)("p",{className:"text-gray-300 mb-1",children:"".concat(r)}),a.map((e,t)=>(0,s.jsx)("p",{className:"text-sm",style:{color:e.color},children:"".concat(e.name||e.dataKey,": $").concat(e.value.toLocaleString())},t))]}):null};return L?(0,s.jsxs)("div",{className:"space-y-6 transition-opacity duration-500 ".concat(M?"opacity-100":"opacity-0"),children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-cyan-300 to-emerald-300 text-transparent bg-clip-text",children:"Dashboard"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 bg-[#192132] rounded-lg p-1 border border-gray-800",children:[(0,s.jsx)("button",{onClick:()=>E("7d"),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-all duration-200 ".concat("7d"===S?"bg-gradient-to-r from-cyan-500/30 to-emerald-500/30 text-cyan-300":"text-gray-400 hover:text-white"),children:"7 d\xedas"}),(0,s.jsx)("button",{onClick:()=>E("30d"),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-all duration-200 ".concat("30d"===S?"bg-gradient-to-r from-cyan-500/30 to-emerald-500/30 text-cyan-300":"text-gray-400 hover:text-white"),children:"30 d\xedas"}),(0,s.jsx)("button",{onClick:()=>E("year"),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-all duration-200 ".concat("year"===S?"bg-gradient-to-r from-cyan-500/30 to-emerald-500/30 text-cyan-300":"text-gray-400 hover:text-white"),children:"1 a\xf1o"}),(0,s.jsx)("button",{onClick:()=>E("all"),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-all duration-200 ".concat("all"===S?"bg-gradient-to-r from-cyan-500/30 to-emerald-500/30 text-cyan-300":"text-gray-400 hover:text-white"),children:"Todo"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"bg-[#192132] p-5 rounded-xl border border-gray-800 shadow-sm transition-transform duration-300 hover:translate-y-[-2px]",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-400 mb-1 text-sm",children:"Balance"}),(0,s.jsxs)("p",{className:"text-2xl font-semibold ".concat($>=0?"text-emerald-400":"text-red-400"),children:["$",$.toLocaleString()]})]}),(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat($>=0?"bg-emerald-500/10 text-emerald-500":"bg-red-500/10 text-red-500"),children:(0,s.jsx)(y.Z,{size:20})})]}),(0,s.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-800",children:(0,s.jsxs)("div",{className:"text-xs inline-flex gap-1 items-center ".concat($>=0?"text-emerald-400":"text-red-400"),children:[$>=0?(0,s.jsx)(j.Z,{size:14}):(0,s.jsx)(b.Z,{size:14}),(0,s.jsxs)("span",{children:["Balance ","7d"===S?"semanal":"30d"===S?"mensual":"year"===S?"anual":"hist\xf3rico"]})]})})]}),(0,s.jsxs)("div",{className:"bg-[#192132] p-5 rounded-xl border border-gray-800 shadow-sm transition-transform duration-300 hover:translate-y-[-2px]",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-400 mb-1 text-sm",children:"Ingresos"}),(0,s.jsxs)("p",{className:"text-2xl font-semibold text-emerald-400",children:["$",F.toLocaleString()]})]}),(0,s.jsx)("div",{className:"w-10 h-10 bg-emerald-500/10 text-emerald-500 rounded-lg flex items-center justify-center",children:(0,s.jsx)(v.Z,{size:20})})]}),(0,s.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-800",children:(0,s.jsxs)("div",{className:"text-xs inline-flex gap-1 items-center text-emerald-400",children:[(0,s.jsx)(N.Z,{size:14}),(0,s.jsx)("span",{children:"7d"===S?"\xdaltimos 7 d\xedas":"30d"===S?"\xdaltimos 30 d\xedas":"year"===S?"\xdaltimo a\xf1o":"Hist\xf3rico"})]})})]}),(0,s.jsxs)("div",{className:"bg-[#192132] p-5 rounded-xl border border-gray-800 shadow-sm transition-transform duration-300 hover:translate-y-[-2px]",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-400 mb-1 text-sm",children:"Gastos"}),(0,s.jsxs)("p",{className:"text-2xl font-semibold text-red-400",children:["$",K.toLocaleString()]})]}),(0,s.jsx)("div",{className:"w-10 h-10 bg-red-500/10 text-red-500 rounded-lg flex items-center justify-center",children:(0,s.jsx)(b.Z,{size:20})})]}),(0,s.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-800",children:(0,s.jsxs)("div",{className:"text-xs inline-flex gap-1 items-center text-red-400",children:[(0,s.jsx)(k.Z,{size:14}),(0,s.jsx)("span",{children:"7d"===S?"\xdaltimos 7 d\xedas":"30d"===S?"\xdaltimos 30 d\xedas":"year"===S?"\xdaltimo a\xf1o":"Hist\xf3rico"})]})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-[#111827] p-5 rounded-xl border border-gray-800 shadow-sm h-[350px]",children:[(0,s.jsx)("h3",{className:"text-lg text-gray-200 font-medium mb-6",children:"Ingresos vs Gastos Diarios"}),W.length>0?(0,s.jsx)("div",{className:"h-[250px] w-full",children:(0,s.jsx)(n.h,{width:"100%",height:"100%",children:(0,s.jsxs)(i.w,{data:W,margin:{top:10,right:30,left:0,bottom:30},children:[(0,s.jsx)(l.q,{strokeDasharray:"3 3",vertical:!1,stroke:"#374151"}),(0,s.jsx)(o.K,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#9CA3AF",fontSize:12}}),(0,s.jsx)(c.B,{axisLine:!1,tickLine:!1,tick:{fill:"#9CA3AF",fontSize:12},tickFormatter:e=>"$".concat(e)}),(0,s.jsx)(d.u,{content:(0,s.jsx)(_,{})}),(0,s.jsx)(x.D,{verticalAlign:"top",align:"right",iconType:"circle",wrapperStyle:{top:0,right:0}}),(0,s.jsx)(m.x,{type:"monotone",dataKey:"income",name:"Ingresos",stroke:"#00E5BE",strokeWidth:3,dot:{stroke:"#00E5BE",strokeWidth:2,fill:"#111827",r:4},activeDot:{r:6,stroke:"#00E5BE",strokeWidth:2,fill:"#fff"},animationDuration:1e3}),(0,s.jsx)(m.x,{type:"monotone",dataKey:"expense",name:"Gastos",stroke:"#f43f5e",strokeWidth:3,dot:{stroke:"#f43f5e",strokeWidth:2,fill:"#111827",r:4},activeDot:{r:6,stroke:"#f43f5e",strokeWidth:2,fill:"#fff"},animationDuration:1e3})]})})}):(0,s.jsx)("div",{className:"flex flex-col items-center justify-center h-[250px] text-gray-500",children:(0,s.jsx)("p",{children:"No hay datos registrados en los \xfaltimos 7 d\xedas"})})]}),(0,s.jsxs)("div",{className:"bg-[#111827] p-5 rounded-xl border border-gray-800 shadow-sm h-[350px]",children:[(0,s.jsx)("h3",{className:"text-lg text-gray-200 font-medium mb-6",children:"Gastos por Categor\xeda"}),B.length>0?(0,s.jsx)("div",{className:"h-[250px] w-full",children:(0,s.jsx)(n.h,{width:"100%",height:"100%",children:(0,s.jsxs)(h.u,{children:[(0,s.jsx)(u.b,{data:B,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:2,dataKey:"value",animationDuration:1e3,label:e=>{let{name:t,percent:a}=e;return"".concat(t," (").concat((100*a).toFixed(0),"%)")},labelLine:{stroke:"#555",strokeWidth:1},children:B.map((e,t)=>(0,s.jsx)(g.b,{fill:w[t%w.length]},"cell-".concat(t)))}),(0,s.jsx)(d.u,{formatter:e=>"$".concat(e.toLocaleString()),content:(0,s.jsx)(_,{})})]})})}):(0,s.jsx)("div",{className:"flex flex-col items-center justify-center h-[250px] text-gray-500",children:(0,s.jsx)("p",{children:"No hay gastos registrados en el per\xedodo seleccionado"})})]}),(0,s.jsxs)("div",{className:"bg-[#111827] p-5 rounded-xl border border-gray-800 shadow-sm h-[350px]",children:[(0,s.jsx)("h3",{className:"text-lg text-gray-200 font-medium mb-6",children:"M\xe9todos de Pago"}),O.length>0?(0,s.jsx)("div",{className:"h-[250px] w-full",children:(0,s.jsx)(n.h,{width:"100%",height:"100%",children:(0,s.jsxs)(f.v,{layout:"vertical",data:O,margin:{top:10,right:30,left:50,bottom:10},children:[(0,s.jsx)(l.q,{strokeDasharray:"3 3",horizontal:!0,vertical:!1,stroke:"#374151"}),(0,s.jsx)(o.K,{type:"number",axisLine:!1,tickLine:!1,tick:{fill:"#9CA3AF",fontSize:12},tickFormatter:e=>"$".concat(e)}),(0,s.jsx)(c.B,{type:"category",dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#9CA3AF",fontSize:12}}),(0,s.jsx)(d.u,{content:(0,s.jsx)(_,{})}),(0,s.jsx)(p.$,{dataKey:"value",fill:"#3b82f6",radius:[0,4,4,0],animationDuration:1e3,children:O.map((e,t)=>(0,s.jsx)(g.b,{fill:w[t%w.length]},"cell-".concat(t)))})]})})}):(0,s.jsx)("div",{className:"flex flex-col items-center justify-center h-[250px] text-gray-500",children:(0,s.jsx)("p",{children:"No hay datos disponibles"})})]}),(0,s.jsxs)("div",{className:"bg-[#111827] p-5 rounded-xl border border-gray-800 shadow-sm h-[350px]",children:[(0,s.jsx)("h3",{className:"text-lg text-gray-200 font-medium mb-6",children:"Categor\xedas vs Presupuestos"}),Z.length>0?(0,s.jsx)("div",{className:"h-[250px] w-full",children:(0,s.jsx)(n.h,{width:"100%",height:"100%",children:(0,s.jsxs)(f.v,{layout:"vertical",data:Z,margin:{top:10,right:30,left:70,bottom:10},children:[(0,s.jsx)(l.q,{strokeDasharray:"3 3",horizontal:!0,vertical:!1,stroke:"#374151"}),(0,s.jsx)(o.K,{type:"number",axisLine:!1,tickLine:!1,tick:{fill:"#9CA3AF",fontSize:12},tickFormatter:e=>"$".concat(e)}),(0,s.jsx)(c.B,{type:"category",dataKey:"category",axisLine:!1,tickLine:!1,tick:{fill:"#9CA3AF",fontSize:12}}),(0,s.jsx)(d.u,{content:(0,s.jsx)(_,{})}),(0,s.jsx)(x.D,{verticalAlign:"top",align:"right",iconType:"circle",wrapperStyle:{top:0,right:0}}),(0,s.jsx)(p.$,{dataKey:"budget",name:"Presupuesto",fill:"#8b5cf6",radius:[0,4,4,0],animationDuration:1e3}),(0,s.jsx)(p.$,{dataKey:"actual",name:"Gastado",fill:"#00E5BE",radius:[0,4,4,0],animationDuration:1e3})]})})}):(0,s.jsx)("div",{className:"flex flex-col items-center justify-center h-[250px] text-gray-500",children:(0,s.jsx)("p",{children:"No hay presupuestos configurados"})})]})]})]}):null}}},function(e){e.O(0,[358,971,23,744],function(){return e(e.s=31947)}),_N_E=e.O()}]);